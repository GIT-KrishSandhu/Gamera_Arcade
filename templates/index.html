{% extends "layout.html" %}

{% block content %}
<!-- ***** Banner Start ***** -->
<div class="main-banner">
    <div class="row">
        <div class="col-lg-7">
            <div class="header-text">
                <h6>Welcome To Gamera Arcade</h6>
                <h4>Gesture-Controlled Gaming Revolution</h4>
                <p>Experience the future of gaming with AI-powered hand gesture controls. Play, compete, and earn tokens!</p>
                {% if not session.user_id %}
                <div class="main-button">
                    <a href="{{ url_for('auth') }}">Start Gaming</a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
<!-- ***** Banner End ***** -->

<!-- ***** Most Popular Start ***** -->
<div class="most-popular">
    <div class="row">
        <div class="col-lg-12">
            <div class="heading-section">
                <h4><em>Featured</em> Games</h4>
            </div>
            <div class="row">
                {% for game_id, game in games.items() %}
                <div class="col-lg-3 col-sm-6">
                    <div class="item" onclick="{% if game.status == 'active' %}window.location.href='{{ url_for('game', game_id=game_id) }}'{% endif %}">
                        <img src="{{ game.thumbnail }}" alt="{{ game.name }}" style="border-radius: 23px; width: 100%; height: 200px; object-fit: cover;">
                        <h4>{{ game.name }}<br><span>{{ game.description[:20] }}...</span></h4>
                        <ul>
                            <li><i class="fa fa-star"></i> 4.8</li>
                            {% if game.status == 'active' %}
                                <li><i class="fa fa-gamepad"></i> Play Now</li>
                            {% else %}
                                <li><i class="fa fa-clock"></i> Coming Soon</li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
<!-- ***** Most Popular End ***** -->

<!-- ***** Gaming Library Start ***** -->
<div class="gaming-library" id="leaderboard">
    <div class="col-lg-12">
        <div class="heading-section">
            <h4><em>Top Players</em> Leaderboard</h4>
        </div>
        {% if users %}
            {% for user in users %}
            <div class="item {% if loop.last %}last-item{% endif %}">
                <ul>
                    <li>
                        {% if loop.index == 1 %}
                            <i class="fas fa-crown" style="color: #ffd700; font-size: 40px; margin-left:20px"></i>
                        {% elif loop.index == 2 %}
                            <i class="fas fa-medal" style="color: #c0c0c0; font-size: 40px; margin-left:20px"></i>
                        {% elif loop.index == 3 %}
                            <i class="fas fa-medal" style="color: #cd7f32; font-size: 40px; margin-left:20px"></i>
                        {% else %}
                            <span style="font-size: 24px; font-weight: bold; color: var(--accent-color);">#{{ loop.index }}</span>
                        {% endif %}
                    </li>
                    <li><h4>{{ user.username }}</h4><span>Gamer</span></li>
                    <li><h4>Rank</h4><span>#{{ loop.index }}</span></li>
                    <li><h4>Coins Earned</h4><span>{{ user.tokens }}</span></li>
                    <li><h4>Status</h4><span>Active</span></li>
                </ul>
            </div>
            {% endfor %}
        {% else %}
            <div class="item">
                <ul>
                    <li><i class="fas fa-trophy" style="color: var(--accent-color); font-size: 40px;"></i></li>
                    <li><h4>No Players Yet</h4><span>Be the first!</span></li>
                    <li><h4>Join Now</h4><span>Start Playing</span></li>
                    <li><h4>Earn Coins</h4><span>Win Games</span></li>
                    <li><h4>Status</h4><span>Waiting</span></li>
                    <li><div class="main-border-button"><a href="{{ url_for('auth') }}">Register</a></div></li>
                </ul>
            </div>
        {% endif %}
    </div>
</div>
<!-- ***** Gaming Library End ***** -->

<section class="features-section">
    <div class="section-container">
        <div class="section-header">
            <h2 class="section-title">Why Gamera Arcade?</h2>
        </div>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-hand-paper"></i>
                </div>
                <h3 class="feature-title">Gesture Control</h3>
                <p class="feature-description">
                    Play games using natural hand movements detected by advanced AI computer vision.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-coins"></i>
                </div>
                <h3 class="feature-title">Web3 Rewards</h3>
                <p class="feature-description">
                    Earn tokens and collectible NFTs based on your gaming performance and streaks.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h3 class="feature-title">Leaderboards</h3>
                <p class="feature-description">
                    Compete with players worldwide and climb the ranks in each game category.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3 class="feature-title">Cross-Platform</h3>
                <p class="feature-description">
                    Play seamlessly across devices with responsive design and cloud save sync.
                </p>
            </div>
        </div>
    </div>
</section>


{% endblock %}

{% block scripts %}
<script>
// Add any homepage-specific JavaScript here
document.addEventListener('DOMContentLoaded', function() {
    // Animate floating elements
    const floatingElements = document.querySelectorAll('.floating-icon');
    floatingElements.forEach((element, index) => {
        element.style.animationDelay = `${index * 0.5}s`;
    });
    
    // Add hover effects to game cards
    const gameCards = document.querySelectorAll('.game-card');
    gameCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            if (!this.classList.contains('coming-soon')) {
                this.style.transform = 'translateY(-10px) scale(1.02)';
            }
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
});
</script>
{% endblock %}